Version 4
SHEET 1 1836 968
WIRE 1376 -480 1312 -480
WIRE 1488 -480 1376 -480
WIRE 1568 -480 1488 -480
WIRE 1488 -464 1488 -480
WIRE 1376 -416 1376 -480
WIRE 1488 -352 1488 -400
WIRE 1376 -288 1376 -336
WIRE 1488 -288 1376 -288
WIRE 1376 -224 1376 -288
WIRE -192 -144 -416 -144
WIRE 32 -144 32 -208
WIRE 32 -144 -192 -144
WIRE 272 -144 32 -144
WIRE 448 -144 272 -144
WIRE 544 -144 448 -144
WIRE 672 -144 640 -144
WIRE 976 -144 672 -144
WIRE 1104 -144 976 -144
WIRE 1248 -144 1248 -480
WIRE 1248 -144 1104 -144
WIRE 272 -96 272 -144
WIRE 1248 -96 1248 -144
WIRE 1472 -96 1248 -96
WIRE 1648 -96 1472 -96
WIRE 1712 -96 1648 -96
WIRE -192 -80 -192 -144
WIRE 976 -80 976 -144
WIRE 32 -64 32 -144
WIRE -416 -48 -416 -144
WIRE -416 -48 -496 -48
WIRE -352 -48 -416 -48
WIRE 448 -48 448 -144
WIRE 592 -48 592 -80
WIRE 592 -48 544 -48
WIRE 32 32 32 0
WIRE 80 32 32 32
WIRE 272 32 272 -16
WIRE 336 32 272 32
WIRE -496 48 -496 -48
WIRE -496 48 -544 48
WIRE -432 48 -496 48
WIRE 32 64 32 32
WIRE 272 64 272 32
WIRE 1104 64 1104 -144
WIRE 1248 64 1248 -96
WIRE -544 96 -544 48
WIRE -432 96 -432 48
WIRE 144 112 144 0
WIRE 144 112 96 112
WIRE 208 112 144 112
WIRE 672 176 672 -144
WIRE 672 176 624 176
WIRE -544 192 -544 160
WIRE -544 192 -912 192
WIRE -352 192 -352 -48
WIRE 272 192 272 160
WIRE 272 192 208 192
WIRE 496 192 496 16
WIRE 496 192 272 192
WIRE -912 224 -912 192
WIRE 32 224 32 160
WIRE 144 224 144 112
WIRE 144 224 32 224
WIRE -432 272 -432 160
WIRE -432 272 -704 272
WIRE 688 288 464 288
WIRE 784 288 752 288
WIRE 1104 288 1104 128
WIRE 1104 288 784 288
WIRE 1248 288 1248 144
WIRE 1248 288 1104 288
WIRE 1360 288 1248 288
WIRE 272 320 272 192
WIRE -912 336 -912 304
WIRE -704 336 -704 272
WIRE -704 336 -912 336
WIRE 32 336 32 224
WIRE -544 352 -544 192
WIRE -432 352 -432 272
WIRE 624 368 624 176
WIRE 624 368 528 368
WIRE -192 384 -192 0
WIRE -192 384 -256 384
WIRE -32 384 -192 384
WIRE 624 416 624 368
WIRE 1472 416 1472 -96
WIRE 1648 416 1648 -96
WIRE 784 432 784 288
WIRE 784 432 656 432
WIRE 272 448 272 384
WIRE 272 448 208 448
WIRE 464 448 464 288
WIRE 592 448 464 448
WIRE 672 464 656 464
WIRE -544 480 -544 416
WIRE -496 480 -544 480
WIRE -432 480 -432 416
WIRE -432 480 -496 480
WIRE 32 480 32 432
WIRE 96 480 32 480
WIRE 272 512 272 448
WIRE 464 512 464 448
WIRE -496 560 -496 480
WIRE -432 560 -496 560
WIRE -352 560 -352 256
WIRE -352 560 -432 560
WIRE 32 576 32 480
WIRE 976 576 976 0
WIRE 1024 576 976 576
WIRE 1248 576 1248 288
WIRE -192 592 -192 384
WIRE 272 624 272 592
WIRE 272 624 208 624
WIRE 672 624 672 464
WIRE 704 624 672 624
WIRE 800 624 704 624
WIRE 832 624 800 624
WIRE 976 624 976 576
WIRE 976 624 912 624
WIRE 272 656 272 624
WIRE 976 656 976 624
WIRE 352 704 336 704
WIRE 464 704 464 592
WIRE 464 704 352 704
WIRE 528 704 528 368
WIRE 704 704 704 624
WIRE 800 704 800 624
WIRE 352 784 352 704
WIRE -432 880 -432 560
WIRE -192 880 -192 656
WIRE -192 880 -432 880
WIRE 32 880 32 656
WIRE 32 880 -192 880
WIRE 272 880 272 752
WIRE 272 880 32 880
WIRE 528 880 528 768
WIRE 528 880 272 880
WIRE 624 880 624 480
WIRE 624 880 528 880
WIRE 704 880 704 768
WIRE 704 880 624 880
WIRE 800 880 800 768
WIRE 800 880 704 880
WIRE 1072 880 1072 848
WIRE 1072 880 800 880
WIRE 1248 880 1248 656
WIRE 1248 880 1072 880
WIRE 1472 880 1472 480
WIRE 1472 880 1248 880
WIRE 1648 880 1648 496
WIRE 1648 880 1472 880
WIRE -192 928 -192 880
FLAG -192 928 0
FLAG 144 0 Vb
IOPIN 144 0 Out
FLAG 336 32 Veq3
FLAG 80 32 Veq2
FLAG 96 480 Veq1
FLAG -256 384 Vbq1
FLAG 208 192 Vd7+
FLAG 208 448 Vd7-
FLAG 208 624 Veq4
FLAG 352 784 Vbq4
FLAG 1712 -96 VDC+
IOPIN 1712 -96 Out
FLAG 1024 576 Vref
FLAG 1360 288 Vouth
FLAG 32 -208 Vcc
FLAG 1376 -224 0
FLAG 1568 -480 Vtest
IOPIN 1568 -480 Out
SYMBOL npn -32 336 R0
SYMATTR InstName Q1
SYMATTR Value 2N5210
SYMBOL LED -208 592 R0
SYMATTR InstName D1
SYMATTR Value NSCW100
SYMBOL res 16 560 R0
SYMATTR InstName R1
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage -912 208 R0
WINDOW 3 -312 25 Left 2
WINDOW 123 -312 53 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 31 60 0 0 0 10000)
SYMATTR Value2 AC 31 0
SYMATTR InstName V1
SYMBOL diode -528 160 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value MURS120
SYMBOL diode -416 160 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value MURS120
SYMBOL diode -528 416 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value MURS120
SYMBOL diode -416 416 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value MURS120
SYMBOL polcap -368 192 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 2200µ
SYMATTR InstName C1
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=50 Irms=2.56 Rser=0.024 Lser=0 mfg="Nichicon" pn="UPL1H222MRH" type="Al electrolytic"
SYMBOL res -208 -96 R0
SYMATTR InstName R2
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL pnp 96 160 R180
SYMATTR InstName Q2
SYMATTR Value 2N5087
SYMBOL pnp 208 160 M180
SYMATTR InstName Q3
SYMATTR Value 2N5087
SYMBOL res 256 -112 R0
SYMATTR InstName R3
SYMATTR Value 150
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL LED 16 -64 R0
WINDOW 3 -106 33 Left 2
SYMATTR Value NSCW100
SYMATTR InstName D6
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL zener 288 384 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMATTR Value BZX84B9V1L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 256 496 R0
SYMATTR InstName R4
SYMATTR Value 10
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL pnp 336 752 R180
SYMATTR InstName Q4
SYMATTR Value 2N5087
SYMBOL References\\LT1021-10 1024 752 R270
SYMATTR InstName U1
SYMBOL Opamps\\AD8515 624 384 M0
SYMATTR InstName U2
SYMBOL res 480 608 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 10
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL npn2 448 16 R270
SYMATTR InstName Q5
SYMATTR Value 2N3019
SYMBOL npn2 544 -80 R270
SYMATTR InstName Q6
SYMATTR Value 2N3019
SYMBOL res 960 -96 R0
SYMATTR InstName R6
SYMATTR Value 1K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 1232 48 R0
SYMATTR InstName R7
SYMATTR Value 499
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 1232 560 R0
SYMATTR InstName R8
SYMATTR Value 499
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 816 608 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 499
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL cap 752 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 150p
SYMATTR SpiceLine V=50 Irms=31.2m Rser=0.363412 Lser=0 mfg="KEMET" pn="C0603C151K5RAC" type="X7R"
SYMBOL polcap 1456 416 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 220µ
SYMATTR InstName C3
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=35 Irms=325m Rser=0.24 Lser=0 mfg="Nichicon" pn="UPR1V221MPH" type="Al electrolytic"
SYMBOL res 1632 400 R0
SYMATTR InstName R10
SYMATTR Value 100
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL polcap 1248 -464 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 -6 28 VBottom 2
SYMATTR InstName C4
SYMATTR Value 10µ
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=35 Irms=44m Rser=2.8 Lser=0 mfg="Nichicon" pn="UPR1V100MAH" type="Al electrolytic"
SYMBOL res 1360 -432 R0
SYMATTR InstName R11
SYMATTR Value 10K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL diode 1472 -464 R0
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL diode 1504 -288 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D9
SYMATTR Value 1N4148
SYMBOL polcap 688 704 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 47µ
SYMATTR InstName C6
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=10 Irms=1.8 Rser=0.009 Lser=0 mfg="Rubycon" pn="10SWZ47M R25" type="Al electrolytic"
SYMBOL cap 784 704 R0
SYMATTR InstName C7
SYMATTR Value 0.01µ
SYMATTR SpiceLine V=10 Irms=405m Rser=0.0322889 Lser=0 mfg="KEMET" pn="C0201C103K8PAC" type="X5R"
SYMBOL cap 512 704 R0
SYMATTR InstName C8
SYMATTR Value 0.01µ
SYMATTR SpiceLine V=10 Irms=405m Rser=0.0322889 Lser=0 mfg="KEMET" pn="C0201C103K8PAC" type="X5R"
SYMBOL cap 1088 64 R0
SYMATTR Value 10µ
SYMATTR InstName C5
SYMATTR SpiceLine V=10 Irms=13.8 Rser=0.00468332 Lser=0 mfg="KEMET" pn="C1210C106K8RAC" type="X7R"
TEXT -1216 584 Left 2 !.tran 20
TEXT -1224 952 Left 2 !;tran 1000
